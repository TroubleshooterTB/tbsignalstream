run: npm run build
staticDirectory: .next

# Angel One Smart API integration - NEW LOGIN (single Trading API)
env:
  # Backend Service URL (Cloud Run) - CORRECT URL
  - variable: BACKEND_URL
    value: https://trading-bot-service-vmxfbt7qiq-el.a.run.app
  
  # Trading API Credentials (NEW LOGIN - replaces old multi-API system)
  - variable: ANGELONE_TRADING_API_KEY
    secret: ANGELONE_TRADING_API_KEY
  - variable: ANGELONE_TRADING_API_SECRET
    secret: ANGELONE_TRADING_SECRET
  
  # Account Credentials
  - variable: ANGELONE_CLIENT_CODE
    secret: ANGELONE_CLIENT_CODE
  - variable: ANGELONE_PASSWORD
    secret: ANGELONE_PASSWORD
  - variable: ANGELONE_TOTP_SECRET
    secret: ANGELONE_TOTP_SECRET

  # Crypto Bot Credentials Encryption Key
  - variable: CREDENTIALS_ENCRYPTION_KEY
    secret: CREDENTIALS_ENCRYPTION_KEY

  # Firebase web app config (JSON). Provide this as a secret with availability BUILD and RUNTIME.
  - variable: FIREBASE_WEBAPP_CONFIG
    secret: FIREBASE_WEBAPP_CONFIG

  # Expose client-friendly Firebase variables so Next.js inlines them cleanly at build time
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: NEXT_PUBLIC_FIREBASE_API_KEY
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    secret: NEXT_PUBLIC_FIREBASE_APP_ID
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    secret: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    secret: NEXT_PUBLIC_FIREBASE_PROJECT_ID
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    secret: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    secret: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
  - variable: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    secret: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID

  # Backend URL for client-side access
  - variable: NEXT_PUBLIC_BACKEND_URL
    value: https://trading-bot-service-818546654122.asia-south1.run.app
